(function(e){function j(l){l=l.replace(/\./g,"__dot__");l=l.replace(/\-/g,"__dash__");return l}function f(l){l=l.replace(/__dot__/g,".");l=l.replace(/__dash__/g,"-");return l}function c(o,n,q){var m=o.id.replace(n,"");m=j(m);var l=o.href;if(q){if(l.indexOf("?")===-1){l+="?_popup=1"}else{l+="&_popup=1"}}var p=window.open(l,m,"height=500,width=800,resizable=yes,scrollbars=yes");p.focus();return false}function i(l){return c(l,/^lookup_/,true)}function b(o,n){var l=f(o.name);var m=document.getElementById(l);if(m.className.indexOf("vManyToManyRawIdAdminField")!==-1&&m.value){m.value+=","+n}else{document.getElementById(l).value=n}o.close()}function k(l){return c(l,/^(change|add|delete)_/,false)}function g(l){var n=e(l);var o=n.nextAll(".change-related, .delete-related");if(!o.length){return}var m=n.val();if(m){o.each(function(){var p=e(this);p.attr("href",p.attr("data-href-template").replace("__fk__",m))})}else{o.removeAttr("href")}}function d(r,n,t){var m=f(r.name);var p=document.getElementById(m);if(p){var q=p.nodeName.toUpperCase();if(q==="SELECT"){p.options[p.options.length]=new Option(t,n,true,true)}else{if(q==="INPUT"){if(p.className.indexOf("vManyToManyRawIdAdminField")!==-1&&p.value){p.value+=","+n}else{p.value=n}}}e(p).trigger("change")}else{var l=m+"_to";var s=new Option(t,n);SelectBox.add_to_cache(l,s);SelectBox.redisplay(l)}r.close()}function h(p,n,r,l){var q=f(p.name).replace(/^edit_/,"");var o=interpolate("#%s, #%s_from, #%s_to",[q,q,q]);var m=e(o);m.find("option").each(function(){if(this.value===n){this.textContent=r;this.value=l}});p.close()}function a(o,m){var p=f(o.name).replace(/^delete_/,"");var n=interpolate("#%s, #%s_from, #%s_to",[p,p,p]);var l=e(n);l.find("option").each(function(){if(this.value===m){e(this).remove()}}).trigger("change");o.close()}window.id_to_windowname=j;window.windowname_to_id=f;window.showRelatedObjectLookupPopup=i;window.dismissRelatedLookupPopup=b;window.showRelatedObjectPopup=k;window.updateRelatedObjectLinks=g;window.dismissAddRelatedObjectPopup=d;window.dismissChangeRelatedObjectPopup=h;window.dismissDeleteRelatedObjectPopup=a;window.showAddAnotherPopup=k;window.dismissAddAnotherPopup=d;e(document).ready(function(){e("a[data-popup-opener]").click(function(l){l.preventDefault();opener.dismissRelatedLookupPopup(window,e(this).data("popup-opener"))});e("body").on("click",".related-widget-wrapper-link",function(m){m.preventDefault();if(this.href){var l=e.Event("django:show-related",{href:this.href});e(this).trigger(l);if(!l.isDefaultPrevented()){k(this)}}});e("body").on("change",".related-widget-wrapper select",function(m){var l=e.Event("django:update-related");e(this).trigger(l);if(!l.isDefaultPrevented()){g(this)}});e(".related-widget-wrapper select").trigger("change");e("body").on("click",".related-lookup",function(m){m.preventDefault();var l=e.Event("django:lookup-related");e(this).trigger(l);if(!l.isDefaultPrevented()){i(this)}})})})(django.jQuery);