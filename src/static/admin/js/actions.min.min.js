(function(c){var d;c.fn.actions=function(t){var a=c.extend({},c.fn.actions.defaults,t);var s=c(this);var o=false;var b=function(){c(a.acrossClears).hide();c(a.acrossQuestions).show();c(a.allContainer).hide()},r=function(){c(a.acrossClears).show();c(a.acrossQuestions).hide();c(a.actionContainer).toggleClass(a.selectedClass);c(a.allContainer).show();c(a.counterContainer).hide()},m=function(){c(a.acrossClears).hide();c(a.acrossQuestions).hide();c(a.allContainer).hide();c(a.counterContainer).show()},n=function(){m();c(a.acrossInput).val(0);c(a.actionContainer).removeClass(a.selectedClass)},q=function(e){if(e){b()}else{m()}c(s).prop("checked",e).parent().parent().toggleClass(a.selectedClass,e)},p=function(){var f=c(s).filter(":checked").length;var e=c(".action-counter").data("actionsIcnt");c(a.counterContainer).html(interpolate(ngettext("%(sel)s of %(cnt)s selected","%(sel)s of %(cnt)s selected",f),{sel:f,cnt:e},true));c(a.allToggle).prop("checked",function(){var g;if(f===s.length){g=true;b()}else{g=false;n()}return g})};c(a.counterContainer).show();c(this).filter(":checked").each(function(e){c(this).parent().parent().toggleClass(a.selectedClass);p();if(c(a.acrossInput).val()===1){r()}});c(a.allToggle).show().click(function(){q(c(this).prop("checked"));p()});c("a",a.acrossQuestions).click(function(e){e.preventDefault();c(a.acrossInput).val(1);r()});c("a",a.acrossClears).click(function(e){e.preventDefault();c(a.allToggle).prop("checked",false);n();q(0);p()});d=null;c(s).click(function(g){if(!g){g=window.event}var f=g.target?g.target:g.srcElement;if(d&&c.data(d)!==c.data(f)&&g.shiftKey===true){var e=false;c(d).prop("checked",f.checked).parent().parent().toggleClass(a.selectedClass,f.checked);c(s).each(function(){if(c.data(this)===c.data(d)||c.data(this)===c.data(f)){e=(e)?false:true}if(e){c(this).prop("checked",f.checked).parent().parent().toggleClass(a.selectedClass,f.checked)}})}c(f).parent().parent().toggleClass(a.selectedClass,f.checked);d=f;p()});c("form#changelist-form table#result_list tr").find("td:gt(0) :input").change(function(){o=true});c('form#changelist-form button[name="index"]').click(function(e){if(o){return confirm(gettext("You have unsaved changes on individual editable fields. If you run an action, your unsaved changes will be lost."))}});c('form#changelist-form input[name="_save"]').click(function(f){var e=false;c("select option:selected",a.actionContainer).each(function(){if(c(this).val()){e=true}});if(e){if(o){return confirm(gettext("You have selected an action, but you haven't saved your changes to individual fields yet. Please click OK to save. You'll need to re-run the action."))}else{return confirm(gettext("You have selected an action, and you haven't made any changes on individual fields. You're probably looking for the Go button rather than the Save button."))}}})};c.fn.actions.defaults={actionContainer:"div.actions",counterContainer:"span.action-counter",allContainer:"div.actions span.all",acrossInput:"div.actions input.select-across",acrossQuestions:"div.actions span.question",acrossClears:"div.actions span.clear",allToggle:"#action-toggle",selectedClass:"selected"};c(document).ready(function(){var a=c("tr input.action-select");if(a.length>0){a.actions()}})})(django.jQuery);