"use strict";var map,marker,_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(a){return"undefined"==typeof a?"undefined":_typeof2(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"==typeof a?"undefined":_typeof2(a)};$(document).ajaxError(function(a,b,c,d){Raven.captureMessage(d||b.statusText,{level:"error",extra:{type:c.type,url:c.url,data:c.data,status:b.status,error:d||b.statusText,response:b.responseText}}),Raven.showReportDialog()});function initGoogleMaps(){$(".address-autofill").each(function(){console.log(this);var a=new google.maps.places.SearchBox(this);a.setBounds(new google.maps.LatLngBounds({lng:-3.8776106640625585,lat:51.09789643167155},{lng:-1.9550032421875585,lat:52.12124375625608}))}),"function"==typeof initMap&&initMap()}$(function(){$("a[href*=\"#\"]").not("[href=\"#\"]").not("[href=\"#0\"]").click(function(a){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var b=$(this.hash);b=b.length?b:$("[name="+this.hash.slice(1)+"]"),b.length&&(a.preventDefault(),$("html, body").animate({scrollTop:b.offset().top},1e3,function(){var a=$(b);return a.focus(),!a.is(":focus")&&void(a.attr("tabindex","-1"),a.focus())}))}}),$(".socials").find("a i").hover(function(){var a=$(this);a.data("old-colour",a.css("color")),a.css("color",a.data("colour"))},function(){var a=$(this);a.css("color",a.data("old-colour"))})});function setupMainCarousel(a,b){var c=Math.max;a.height(c(window.innerHeight-a.offset().top,b)),$(window).on("resize",function(){a.height(c(window.innerHeight-a.offset().top,b))}),a.find(".carousel-icon i").click(function(){$("html, body").animate({scrollTop:$(this).offset().top},1500)})}function loadFeaturedHouses(a){var b=$("\n    <div class=\"col-sm-6 col-lg-3 mt-4\">\n        <div class=\"card\">\n            <div class=\"corner-ribbon-container\">\n                <img class=\"card-img-top\" src=\"\" alt=\"\">\n                <div class=\"corner-ribbon\"><span></span></div>\n            </div>\n            <div class=\"card-body\">\n                <h4 class=\"card-title\"></h4>\n                <h5 class=\"card-subtitle mb-2 text-muted\"></h5>\n                <a href=\"#\" class=\"btn btn-primary\">View</a>\n            </div>\n        </div>\n    </div>");$.get({url:"http://148.251.235.232:8001/properties",dataType:"text",success:function(c){var e=c.replace(/\\r/g,"\\\\n");if(e=JSON.parse(e),"good"===e.status){for(var f=0;4>f&&f<e.properties.length;f++){var g=e.properties[f],h=b.clone();h.find("img").attr("src",g.photos[0]),h.find("h4").text(g.name),h.find("h5").text(g.address),h.find("a").attr("href","/properties/"+g.id),!0===g.sold?h.find(".corner-ribbon").addClass("sold").find("span").text("Sold STC"):h.find(".corner-ribbon span").text("For sale"),h.appendTo(a)}a.find(".loader-box").hide()}else Raven.captureMessage("Invalid response when getting featured houses",{level:"error",extra:{response:c}}),Raven.showReportDialog()},error:function(){a.html($("<h2>").addClass("text-center").addClass("w-100").text("There was an error communicating with the server. Try again later."))}})}function loadProperty(a,b,c){var d,e=$(".loader-box"),f=setInterval(function(){"object"===("undefined"==typeof d?"undefined":_typeof(d))&&(b.setCenter(d),c.setPosition(d),clearInterval(f))},500);e.show().parent().css("min-height",window.innerHeight-e.offset().top),$.get({url:"http://148.251.235.232:8001/properties/"+a,dataType:"text",success:function(b){var c=b.replace(/\\r/g,"\\\\n");if(c=JSON.parse(c),"good"===c.status){var f=c.property,g=$("#houseImageCarousel");$("#description").text(f.desc.replace(/\\n/g,"\n")),$("#house-name").text(f.name),$("#address").text(f.address),f.floorplan?$("#floorplan img").attr("src",f.floorplan):$("#floorplan").hide(),$("#price").text(f.price),d=f.loc,!0===f.sold?g.find(".corner-ribbon").addClass("sold").find("span").text("Sold STC"):g.find(".corner-ribbon span").text("For sale");for(var h,j=0;j<f.features.length;j++)h=f.features[j],$("#features").append($("<li>").text(h));for(var i=0;i<f.photos.length;i++){var k=f.photos[i],l=$("<div class=\"carousel-item\"><img class=\"d-block w-100\" src=\"\" alt=\"\"></div>"),m=$("<li data-target=\"#houseImageCarousel\" data-slide-to=\""+i+"\" ><img src=\"\"/></li>");l.find("img").attr("src",k),m.find("img").attr("src",k),g.find(".carousel-inner").append(l),g.find(".carousel-indicators").append(m)}g.find(".carousel-indicators li:first").addClass("active"),g.find(".carousel-inner div:first").addClass("active")}else"error"===c.status?"id-not-found"===c.error&&($(".property-body").show().html($("<h1 class='my-4 text-center'>").text("House not found")),e.hide().parent().css("min-height","0"),Raven.captureMessage("House not found",{level:"warning",extra:{houseId:a}}),Raven.showReportDialog()):(Raven.captureMessage("Invalid response when getting house",{level:"error",extra:{response:b,houseId:a}}),Raven.showReportDialog());e.hide().parent().css("min-height","0"),$(".property-body").show()},error:function(){$(".property-body").show().html($("<h1 class='my-4 text-center'>").text("There was an error communicating with the server. Try again later.")),e.hide().parent().css("min-height","0")}})}function doPropertySearch(a,b,c,d){"undefined"==typeof b&&(b=[-1,-1]),"undefined"==typeof c&&(c=[0,-1]),"undefined"==typeof d&&(d=0);var e=$(".loader-box");e.show().parent().css("min-height",window.innerHeight-e.offset().top),$(".results .house:not(:first)").remove();var f;f=""===a?"/properties":"/properties/search/"+encodeURIComponent(a)+"?pricemin="+b[0].toString()+"&pricemax="+b[1].toString()+"&distmin="+c[0].toString()+"&distmax="+c[1].toString()+"&sold="+d.toString(),$.get({url:"http://148.251.235.232:8001"+f,dataType:"text",success:function(b){var c=b.replace(/\\r/g,"\\\\n");if(c=JSON.parse(c),"good"===c.status){var f=$(".results .house:first");if(0===c.properties.length)""===a?$("#results-header").text("No property results"):$("#results-header").text("No property results in "+a);else{""!==a&&$("#results-header").text("Property results in "+a);for(var g=0;g<c.properties.length;g++){var h=c.properties[g],i=f.clone();if(i.find("h3").text(h.name),i.find("h5.card-subtitle").text(h.address),i.find("h4").text(h.price),""!==a){var k=Math.round(10*h.distance)/10;i.find("h5:not(:first)").text(k+" miles from search location")}for(var l,m=0;m<h.features.length;m++)l=h.features[m],i.find("ul").append($("<li>").text(l));i.find("img").eq(0).attr("src",h.photos[0]),i.find("img").eq(1).attr("src",h.photos[1]),!1===h.sold?i.find(".corner-ribbon span").text("For sale"):i.find(".corner-ribbon").addClass("sold").find("span").text("Sold STC"),i.data("house-id",h.id),i.show(),i.appendTo(".results > div.container")}}}else"error"===c.status?"loc-not-found"===c.error&&($("#results-header").text(a+" could not be found"),Raven.captureMessage("Location could not be found",{level:"info",extra:{location:a}})):(Raven.captureMessage("Invalid response when getting featured houses",{level:"error",extra:{response:b}}),Raven.showReportDialog());e.hide().parent().css("min-height","0")},error:function(){$("#results-header").text("There was an error communicating with the server. Try again later."),e.hide().parent().css("min-height","0")}})}