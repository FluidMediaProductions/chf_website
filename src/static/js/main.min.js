$(document).ajaxError(function(c,b,d,a){Raven.captureMessage(a||b.statusText,{level:"error",extra:{type:d.type,url:d.url,data:d.data,status:b.status,error:a||b.statusText,response:b.responseText}});Raven.showReportDialog()});function initGoogleMaps(){var a=$("#property-search").get(0);searchBox=new google.maps.places.SearchBox(a);searchBox.setBounds(new google.maps.LatLngBounds({lng:-3.8776106640625585,lat:51.09789643167155},{lng:-1.9550032421875585,lat:52.12124375625608}));if(typeof initMap==="function"){initMap()}}$(function(){$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(a){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var b=$(this.hash);b=b.length?b:$("[name="+this.hash.slice(1)+"]");if(b.length){a.preventDefault();$("html, body").animate({scrollTop:b.offset().top},1000,function(){var c=$(b);c.focus();if(c.is(":focus")){return false}else{c.attr("tabindex","-1");c.focus()}})}}});$(".socials").find("a i").hover(function(){var a=$(this);a.data("old-colour",a.css("color"));a.css("color",a.data("colour"))},function(){var a=$(this);a.css("color",a.data("old-colour"))})});function setupMainCarousel(b,a){b.height(Math.max(window.innerHeight-b.offset().top,a));$(window).on("resize",function(){b.height(Math.max(window.innerHeight-b.offset().top,a))});b.find(".carousel-icon i").click(function(){$("html, body").animate({scrollTop:$(this).offset().top},1500)})}function loadFeaturedHouses(a){var b=$('    <div class="col-sm-6 col-lg-3 mt-4">        <div class="card">            <div class="corner-ribbon-container">                <img class="card-img-top" src="" alt="">                <div class="corner-ribbon"><span></span></div>            </div>            <div class="card-body">                <h4 class="card-title"></h4>                <h5 class="card-subtitle mb-2 text-muted"></h5>                <a href="#" class="btn btn-primary">View</a>            </div>        </div>    </div>');$.get({url:"http://148.251.235.232:8001/properties",dataType:"text",success:function(h){var g=h.replace(/\\r/g,"\\\\n");g=JSON.parse(g);if(g.status==="good"){for(var c=0;c<4&&c<g.properties.length;c++){var f=g.properties[c];var e=b.clone();e.find("img").attr("src",f.photos[0]);e.find("h4").text(f.name);e.find("h5").text(f.address);e.find("a").attr("href","/properties/"+f.id);if(f.sold===true){e.find(".corner-ribbon").addClass("sold").find("span").text("Sold STC")}else{e.find(".corner-ribbon span").text("For sale")}e.appendTo(a)}a.find(".loader-box").hide()}else{Raven.captureMessage("Invalid response when getting featured houses",{level:"error",extra:{response:h}});Raven.showReportDialog()}},error:function(){a.html($("<h2>").addClass("text-center").addClass("w-100").text("There was an error communicating with the server. Try again later."))}})}function loadProperty(f,e,b){var c=$(".loader-box");var a;var d=setInterval(function(){if(typeof a==="object"){e.setCenter(a);b.setPosition(a);clearInterval(d)}},500);c.show().parent().css("min-height",window.innerHeight-c.offset().top);$.get({url:"http://148.251.235.232:8001/properties/"+f,dataType:"text",success:function(m){var k=m.replace(/\\r/g,"\\\\n");k=JSON.parse(k);if(k.status==="good"){var o=k.property;var j=$("#houseImageCarousel");$("#description").text(o.desc.replace(/\\n/g,"\n"));$("#house-name").text(o.name);$("#address").text(o.address);$("#floorplan").attr("src",o.floorplan);$("#price").text(o.price);a=o.loc;if(o.sold===true){j.find(".corner-ribbon").addClass("sold").find("span").text("Sold STC")}else{j.find(".corner-ribbon span").text("For sale")}for(var l=0;l<o.features.length;l++){var p=o.features[l];$("#features").append($("<li>").text(p))}for(l=0;l<o.photos.length;l++){var h=o.photos[l];var g=$('<div class="carousel-item"><img class="d-block w-100" src="" alt=""></div>');var n=$('<li data-target="#houseImageCarousel" data-slide-to="'+l+'" ></li>');g.find("img").attr("src",h);j.find(".carousel-inner").append(g);j.find(".carousel-indicators").append(n)}j.find(".carousel-indicators li:first").addClass("active");j.find(".carousel-inner div:first").addClass("active")}else{if(k.status==="error"){if(k.error==="id-not-found"){$(".property-body").show().html($("<h1 class='my-4 text-center'>").text("House not found"));c.hide().parent().css("min-height","0");Raven.captureMessage("House not found",{level:"warning",extra:{houseId:f}});Raven.showReportDialog()}}else{Raven.captureMessage("Invalid response when getting house",{level:"error",extra:{response:m,houseId:f}});Raven.showReportDialog()}}c.hide().parent().css("min-height","0");$(".property-body").show()},error:function(){$(".property-body").show().html($("<h1 class='my-4 text-center'>").text("There was an error communicating with the server. Try again later."));c.hide().parent().css("min-height","0")}})}function doPropertySearch(a){var c=$(".loader-box");c.show().parent().css("min-height",window.innerHeight-c.offset().top);$(".results .house:not(:first)").remove();var b;if(a===""){b="/properties"}else{b="/properties/search/"+encodeURIComponent(a)}$.get({url:"http://148.251.235.232:8001"+b,dataType:"text",success:function(k){var f=k.replace(/\\r/g,"\\\\n");f=JSON.parse(f);if(f.status==="good"){var h=$(".results .house:first");if(f.properties.length===0){if(a!==""){$("#results-header").text("No property results in "+a)}else{$("#results-header").text("No property results")}}else{if(a!==""){$("#results-header").text("Property results in "+a)}for(var g=0;g<f.properties.length;g++){var m=f.properties[g];var o=h.clone();o.find("h3").text(m.name);o.find("h5.card-subtitle").text(m.address);o.find("h4").text(m.price);if(a!==""){var l=Math.round(m.distance*10)/10;o.find("h5:not(:first)").text(l+" miles from search location")}for(var e=0;e<m.features.length;e++){var n=m.features[e];o.find("ul").append($("<li>").text(n))}o.find("img").eq(0).attr("src",m.photos[0]);o.find("img").eq(1).attr("src",m.photos[1]);if(m.sold===false){o.find(".corner-ribbon span").text("For sale")}else{o.find(".corner-ribbon").addClass("sold").find("span").text("Sold STC")}o.data("house-id",m.id);o.show();o.appendTo(".results > div.container")}}}else{if(f.status==="error"){if(f.error==="loc-not-found"){$("#results-header").text(a+" could not be found");Raven.captureMessage("Location could not be found",{level:"info",extra:{location:a}})}}else{Raven.captureMessage("Invalid response when getting featured houses",{level:"error",extra:{response:k}});Raven.showReportDialog()}}c.hide().parent().css("min-height","0")},error:function(){$("#results-header").text("There was an error communicating with the server. Try again later.");c.hide().parent().css("min-height","0")}})};