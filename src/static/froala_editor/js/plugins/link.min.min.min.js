/*!
 * froala_editor v2.6.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2017 Froala Labs
 */
;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c)}:a(window.jQuery)}(function(a){a.extend(a.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),a.extend(a.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),a.FE.PLUGINS.link=function(b){function c(){var w=b.image?b.image.get():null;if(!w&&b.$wp){var x=b.selection.ranges(0).commonAncestorContainer;if(x&&(x.contains&&x.contains(b.el)||!b.el.contains(x)||b.el==x)&&(x=null),x&&"A"===x.tagName){return x}var y=b.selection.element(),z=b.selection.endElement();return"A"==y.tagName||b.node.isElement(y)||(y=a(y).parentsUntil(b.$el,"a:first").get(0)),"A"==z.tagName||b.node.isElement(z)||(z=a(z).parentsUntil(b.$el,"a:first").get(0)),z&&(z.contains&&z.contains(b.el)||!b.el.contains(z)||b.el==z)&&(z=null),y&&(y.contains&&y.contains(b.el)||!b.el.contains(y)||b.el==y)&&(y=null),z&&z==y&&"A"==z.tagName?y:null}return"A"==b.el.tagName?b.el:w&&w.get(0).parentNode&&"A"==w.get(0).parentNode.tagName?w.get(0).parentNode:void 0}function d(){var D=b.image?b.image.get():null,E=[];if(D){"A"==D.get(0).parentNode.tagName&&E.push(D.get(0).parentNode)}else{var F,w,x,y;if(b.win.getSelection){var z=b.win.getSelection();if(z.getRangeAt&&z.rangeCount){y=b.doc.createRange();for(var A=0;A<z.rangeCount;++A){if(F=z.getRangeAt(A),w=F.commonAncestorContainer,w&&1!=w.nodeType&&(w=w.parentNode),w&&"a"==w.nodeName.toLowerCase()){E.push(w)}else{x=w.getElementsByTagName("a");for(var B=0;B<x.length;++B){y.selectNodeContents(x[B]),y.compareBoundaryPoints(F.END_TO_START,F)<1&&y.compareBoundaryPoints(F.START_TO_END,F)>-1&&E.push(x[B])}}}}}else{if(b.doc.selection&&"Control"!=b.doc.selection.type){if(F=b.doc.selection.createRange(),w=F.parentElement(),"a"==w.nodeName.toLowerCase()){E.push(w)}else{x=w.getElementsByTagName("a"),y=b.doc.body.createTextRange();for(var C=0;C<x.length;++C){y.moveToElementText(x[C]),y.compareEndPoints("StartToEnd",F)>-1&&y.compareEndPoints("EndToStart",F)<1&&E.push(x[C])}}}}}return E}function e(w){if(b.core.hasFocus()){if(g(),w&&"keyup"===w.type&&(w.altKey||w.which==a.FE.KEYCODE.ALT)){return !0}setTimeout(function(){if(!w||w&&(1==w.which||"mouseup"!=w.type)){var x=c(),y=b.image?b.image.get():null;if(x&&!y){if(b.image){var z=b.node.contents(x);if(1==z.length&&"IMG"==z[0].tagName){var A=b.selection.ranges(0);return 0===A.startOffset&&0===A.endOffset?a(x).before(a.FE.MARKERS):a(x).after(a.FE.MARKERS),b.selection.restore(),!1}}w&&w.stopPropagation(),f(x)}}},b.helpers.isIOS()?100:0)}}function f(w){var x=b.popups.get("link.edit");x||(x=j());var y=a(w);b.popups.isVisible("link.edit")||b.popups.refresh("link.edit"),b.popups.setContainer("link.edit",b.$sc);var z=y.offset().left+a(w).outerWidth()/2,A=y.offset().top+y.outerHeight();b.popups.show("link.edit",z,A,y.outerHeight())}function g(){b.popups.hide("link.edit")}function j(){var y="";b.opts.linkEditButtons.length>1&&("A"==b.el.tagName&&b.opts.linkEditButtons.indexOf("linkRemove")>=0&&b.opts.linkEditButtons.splice(b.opts.linkEditButtons.indexOf("linkRemove"),1),y='<div class="fr-buttons">'+b.button.buildList(b.opts.linkEditButtons)+"</div>");var w={buttons:y},x=b.popups.create("link.edit",w);return b.$wp&&b.events.$on(b.$wp,"scroll.link-edit",function(){c()&&b.popups.isVisible("link.edit")&&f(c())}),x}function l(){}function n(){var z=b.popups.get("link.insert"),A=c();if(A){var C,w,x=a(A),y=z.find('input.fr-link-attr[type="text"]'),B=z.find('input.fr-link-attr[type="checkbox"]');for(C=0;C<y.length;C++){w=a(y[C]),w.val(x.attr(w.attr("name")||""))}for(B.prop("checked",!1),C=0;C<B.length;C++){w=a(B[C]),x.attr(w.attr("name"))==w.data("checked")&&w.prop("checked",!0)}z.find('input.fr-link-attr[type="text"][name="text"]').val(x.text())}else{z.find('input.fr-link-attr[type="text"]').val(""),z.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),z.find('input.fr-link-attr[type="text"][name="text"]').val(b.selection.text())}z.find("input.fr-link-attr").trigger("change"),(b.image?b.image.get():null)?z.find('.fr-link-attr[name="text"]').parent().hide():z.find('.fr-link-attr[name="text"]').parent().show()}function o(){var z=b.$tb.find('.fr-command[data-cmd="insertLink"]'),w=b.popups.get("link.insert");if(w||(w=p()),!w.hasClass("fr-active")){if(b.popups.refresh("link.insert"),b.popups.setContainer("link.insert",b.$tb||b.$sc),z.is(":visible")){var x=z.offset().left+z.outerWidth()/2,y=z.offset().top+(b.opts.toolbarBottom?10:z.outerHeight()-10);b.popups.show("link.insert",x,y,z.outerHeight())}else{b.position.forSelection(w),b.popups.show("link.insert")}}}function p(E){if(E){return b.popups.onRefresh("link.insert",n),b.popups.onHide("link.insert",l),!0}var w="";b.opts.linkInsertButtons.length>=1&&(w='<div class="fr-buttons">'+b.button.buildList(b.opts.linkInsertButtons)+"</div>");var x='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',y="",z=0;y='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+b.id+'">',y+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+b.id+'" name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++z+'"></div>',b.opts.linkText&&(y+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+b.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+b.language.translate("Text")+'" tabIndex="'+ ++z+'"></div>');for(var A in b.opts.linkAttributes){if(b.opts.linkAttributes.hasOwnProperty(A)){var B=b.opts.linkAttributes[A];y+='<div class="fr-input-line"><input name="'+A+'" type="text" class="fr-link-attr" placeholder="'+b.language.translate(B)+'" tabIndex="'+ ++z+'"></div>'}}b.opts.linkAlwaysBlank||(y+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+b.id+'" tabIndex="'+ ++z+'"><span>'+x+'</span></span><label for="fr-link-target-'+b.id+'">'+b.language.translate("Open in new tab")+"</label></div>"),y+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++z+'" type="button">'+b.language.translate("Insert")+"</button></div></div>";var C={buttons:w,input_layer:y},D=b.popups.create("link.insert",C);return b.$wp&&b.events.$on(b.$wp,"scroll.link-insert",function(){(b.image?b.image.get():null)&&b.popups.isVisible("link.insert")&&m(),c&&b.popups.isVisible("link.insert")&&i()}),D}function q(){var w=c(),x=b.image?b.image.get():null;if(!1===b.events.trigger("link.beforeRemove",[w])){return !1}x&&w?(x.unwrap(),b.image.edit(x)):w&&(b.selection.save(),a(w).replaceWith(a(w).html()),b.selection.restore(),g())}function r(){b.events.on("keyup",function(w){w.which!=a.FE.KEYCODE.ESC&&e(w)}),b.events.on("window.mouseup",e),b.events.$on(b.$el,"click","a",function(w){b.edit.isDisabled()&&w.preventDefault()}),b.helpers.isMobile()&&b.events.$on(b.$doc,"selectionchange",e),p(!0),"A"==b.el.tagName&&b.$el.addClass("fr-view"),b.events.on("toolbar.esc",function(){if(b.popups.isVisible("link.edit")){return b.events.disableBlur(),b.events.focus(),!1}},!0)}function s(A){var B,C,w=b.opts.linkList[A],x=b.popups.get("link.insert"),y=x.find('input.fr-link-attr[type="text"]'),z=x.find('input.fr-link-attr[type="checkbox"]');for(C=0;C<y.length;C++){B=a(y[C]),w[B.attr("name")]?B.val(w[B.attr("name")]):"text"!=B.attr("name")&&B.val("")}for(C=0;C<z.length;C++){B=a(z[C]),B.prop("checked",B.data("checked")==w[B.attr("name")])}b.accessibility.focusPopup(x)}function t(){var D,E,w=b.popups.get("link.insert"),x=w.find('input.fr-link-attr[type="text"]'),y=w.find('input.fr-link-attr[type="checkbox"]'),z=x.filter('[name="href"]').val(),A=x.filter('[name="text"]').val(),B={};for(E=0;E<x.length;E++){D=a(x[E]),["href","text"].indexOf(D.attr("name"))<0&&(B[D.attr("name")]=D.val())}for(E=0;E<y.length;E++){D=a(y[E]),D.is(":checked")?B[D.attr("name")]=D.data("checked"):B[D.attr("name")]=D.data("unchecked")||null}var C=b.helpers.scrollTop();h(z,A,B),a(b.o_win).scrollTop(C)}function u(){if(!b.selection.isCollapsed()){b.selection.save();for(var z=b.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();z.length;){var A=a(z.pop());A.removeClass("fr-unprocessed");var B=b.node.deepestParent(A.get(0));if(B){var C=A.get(0),D="",w="";do{C=C.parentNode,b.node.isBlock(C)||(D+=b.node.closeTagString(C),w=b.node.openTagString(C)+w)}while(C!=B);var x=b.node.openTagString(A.get(0))+A.html()+b.node.closeTagString(A.get(0));A.replaceWith('<span id="fr-break"></span>');var y=B.outerHTML;y=y.replace(/<span id="fr-break"><\/span>/g,D+x+w),B.outerHTML=y}z=b.$el.find(".fr-marker.fr-unprocessed").toArray()}b.html.cleanEmptyTags(),b.selection.restore()}}function h(C,D,E){if(void 0===E&&(E={}),!1===b.events.trigger("link.beforeInsert",[C,D,E])){return !1}var F=b.image?b.image.get():null;F||"A"==b.el.tagName?"A"==b.el.tagName&&b.$el.focus():(b.selection.restore(),b.popups.hide("link.insert"));var w=C;if(b.opts.linkConvertEmailAddress){a.FE.MAIL_REGEX.test(C)&&!/^mailto:.*/i.test(C)&&(C="mailto:"+C)}var x=/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i;if(""===b.opts.linkAutoPrefix||/^(mailto|tel|sms|notes|data):.*/i.test(C)||/^data:image.*/i.test(C)||/^(https?:|ftps?:|file:|)\/\//i.test(C)||x.test(C)||["/","{","[","#","("].indexOf((C||"")[0])<0&&(C=b.opts.linkAutoPrefix+C),C=b.helpers.sanitizeURL(C),b.opts.linkAlwaysBlank&&(E.target="_blank"),b.opts.linkAlwaysNoFollow&&(E.rel="nofollow"),"_blank"==E.target?E.rel?E.rel+=" noopener noreferrer":E.rel="noopener noreferrer":null==E.target&&(E.rel?E.rel=E.rel.replace(/noopener/,"").replace(/noreferrer/,""):E.rel=null),D=D||"",C===b.opts.linkAutoPrefix){return b.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),b.events.trigger("link.bad",[w]),!1}var y,z=c();if(z){y=a(z),y.attr("href",C),D.length>0&&y.text()!=D&&!F&&y.text(D),F||y.prepend(a.FE.START_MARKER).append(a.FE.END_MARKER),y.attr(E),F||b.selection.restore()}else{F?F.wrap('<a href="'+C+'"></a>'):(b.format.remove("a"),b.selection.isCollapsed()?(D=0===D.length?w:D,b.html.insert('<a href="'+C+'">'+a.FE.START_MARKER+D+a.FE.END_MARKER+"</a>"),b.selection.restore()):D.length>0&&D!=b.selection.text().replace(/\n/g,"")?(b.selection.remove(),b.html.insert('<a href="'+C+'">'+a.FE.START_MARKER+D+a.FE.END_MARKER+"</a>"),b.selection.restore()):(u(),b.format.apply("a",{href:C})));for(var A=d(),B=0;B<A.length;B++){y=a(A[B]),y.attr(E),y.removeAttr("_moz_dirty")}1==A.length&&b.$wp&&!F&&(a(A[0]).prepend(a.FE.START_MARKER).append(a.FE.END_MARKER),b.selection.restore())}if(F){b.popups.get("link.insert").find("input:focus").blur(),b.image.edit(F)}else{e()}}function i(){g();var w=c();if(w){var x=b.popups.get("link.insert");x||(x=p()),b.popups.isVisible("link.insert")||(b.popups.refresh("link.insert"),b.selection.save(),b.helpers.isMobile()&&(b.events.disableBlur(),b.$el.blur(),b.events.enableBlur())),b.popups.setContainer("link.insert",b.$sc);var y=(b.image?b.image.get():null)||a(w),z=y.offset().left+y.outerWidth()/2,A=y.offset().top+y.outerHeight();b.popups.show("link.insert",z,A,y.outerHeight())}}function k(){(b.image?b.image.get():null)?b.image.back():(b.events.disableBlur(),b.selection.restore(),b.events.enableBlur(),c()&&b.$wp?(b.selection.restore(),g(),e()):"A"==b.el.tagName?(b.$el.focus(),e()):(b.popups.hide("link.insert"),b.toolbar.showInline()))}function m(){var z=b.image?b.image.get():null;if(z){var w=b.popups.get("link.insert");w||(w=p()),n(!0),b.popups.setContainer("link.insert",b.$sc);var x=z.offset().left+z.outerWidth()/2,y=z.offset().top+z.outerHeight();b.popups.show("link.insert",x,y,z.outerHeight())}}function v(w,x,y){void 0===y&&(y=b.opts.linkMultipleStyles),void 0===x&&(x=b.opts.linkStyles);var z=c();if(!z){return !1}if(!y){var A=Object.keys(x);A.splice(A.indexOf(w),1),a(z).removeClass(A.join(" "))}a(z).toggleClass(w),e()}return{_init:r,remove:q,showInsertPopup:o,usePredefined:s,insertCallback:t,insert:h,update:i,get:c,allSelected:d,back:k,imageLink:m,applyStyle:v}},a.FE.DefineIcon("insertLink",{NAME:"link"}),a.FE.RegisterShortcut(a.FE.KEYCODE.K,"insertLink",null,"K"),a.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),a.FE.DefineIcon("linkOpen",{NAME:"external-link"}),a.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(b){this.link.get()?b.removeClass("fr-hidden"):b.addClass("fr-hidden")},callback:function(){var b=this.link.get();b&&this.o_win.open(b.href)}}),a.FE.DefineIcon("linkEdit",{NAME:"edit"}),a.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(b){this.link.get()?b.removeClass("fr-hidden"):b.addClass("fr-hidden")}}),a.FE.DefineIcon("linkRemove",{NAME:"unlink"}),a.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(b){this.link.get()?b.removeClass("fr-hidden"):b.addClass("fr-hidden")}}),a.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(b){var e=this.link.get()&&this.doc.hasFocus();(this.image?this.image.get():null)||e||this.opts.toolbarInline?(b.removeClass("fr-hidden"),b.next(".fr-separator").removeClass("fr-hidden")):(b.addClass("fr-hidden"),b.next(".fr-separator").addClass("fr-hidden"))}}),a.FE.DefineIcon("linkList",{NAME:"search"}),a.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var c='<ul class="fr-dropdown-list" role="presentation">',g=this.opts.linkList,b=0;b<g.length;b++){c+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+b+'">'+(g[b].displayText||g[b].text)+"</a></li>"}return c+="</ul>"},callback:function(b,e){this.link.usePredefined(e)}}),a.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(b){this.link.get()?b.text(this.language.translate("Update")):b.text(this.language.translate("Insert"))}}),a.FE.DefineIcon("imageLink",{NAME:"link"}),a.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(c){var g,b=this.link.get();b?(g=c.prev(),g.hasClass("fr-separator")&&g.removeClass("fr-hidden"),c.addClass("fr-hidden")):(g=c.prev(),g.hasClass("fr-separator")&&g.addClass("fr-hidden"),c.removeClass("fr-hidden"))}}),a.FE.DefineIcon("linkStyle",{NAME:"magic"}),a.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var c='<ul class="fr-dropdown-list" role="presentation">',g=this.opts.linkStyles;for(var b in g){g.hasOwnProperty(b)&&(c+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+b+'">'+this.language.translate(g[b])+"</a></li>")}return c+="</ul>"},callback:function(b,e){this.link.applyStyle(e)},refreshOnShow:function(b,c){var d=this.link.get();if(d){var e=a(d);c.find(".fr-command").each(function(){var g=a(this).data("param1"),f=e.hasClass(g);a(this).toggleClass("fr-active",f).attr("aria-selected",f)})}}})});