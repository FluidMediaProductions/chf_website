/*!
 * froala_editor v2.6.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2017 Froala Labs
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof module&&module.exports?module.exports=function(a,d){return void 0===d&&(d="undefined"!=typeof window?require("jquery"):require("jquery")(a)),b(d)}:b(window.jQuery)}(function(b){b.extend(b.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),b.extend(b.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),b.FE.PLUGINS.link=function(P){function O(){var j=P.image?P.image.get():null;if(!j&&P.$wp){var i=P.selection.ranges(0).commonAncestorContainer;if(i&&(i.contains&&i.contains(P.el)||!P.el.contains(i)||P.el==i)&&(i=null),i&&"A"===i.tagName){return i}var h=P.selection.element(),g=P.selection.endElement();return"A"==h.tagName||P.node.isElement(h)||(h=b(h).parentsUntil(P.$el,"a:first").get(0)),"A"==g.tagName||P.node.isElement(g)||(g=b(g).parentsUntil(P.$el,"a:first").get(0)),g&&(g.contains&&g.contains(P.el)||!P.el.contains(g)||P.el==g)&&(g=null),h&&(h.contains&&h.contains(P.el)||!P.el.contains(h)||P.el==h)&&(h=null),g&&g==h&&"A"==g.tagName?h:null}return"A"==P.el.tagName?P.el:j&&j.get(0).parentNode&&"A"==j.get(0).parentNode.tagName?j.get(0).parentNode:void 0}function N(){var u=P.image?P.image.get():null,t=[];if(u){"A"==u.get(0).parentNode.tagName&&t.push(u.get(0).parentNode)}else{var s,r,q,p;if(P.win.getSelection){var o=P.win.getSelection();if(o.getRangeAt&&o.rangeCount){p=P.doc.createRange();for(var n=0;n<o.rangeCount;++n){if(s=o.getRangeAt(n),r=s.commonAncestorContainer,r&&1!=r.nodeType&&(r=r.parentNode),r&&"a"==r.nodeName.toLowerCase()){t.push(r)}else{q=r.getElementsByTagName("a");for(var m=0;m<q.length;++m){p.selectNodeContents(q[m]),p.compareBoundaryPoints(s.END_TO_START,s)<1&&p.compareBoundaryPoints(s.START_TO_END,s)>-1&&t.push(q[m])}}}}}else{if(P.doc.selection&&"Control"!=P.doc.selection.type){if(s=P.doc.selection.createRange(),r=s.parentElement(),"a"==r.nodeName.toLowerCase()){t.push(r)}else{q=r.getElementsByTagName("a"),p=P.doc.body.createTextRange();for(var l=0;l<q.length;++l){p.moveToElementText(q[l]),p.compareEndPoints("StartToEnd",s)>-1&&p.compareEndPoints("EndToStart",s)<1&&t.push(q[l])}}}}}return t}function M(c){if(P.core.hasFocus()){if(K(),c&&"keyup"===c.type&&(c.altKey||c.which==b.FE.KEYCODE.ALT)){return !0}setTimeout(function(){if(!c||c&&(1==c.which||"mouseup"!=c.type)){var k=O(),j=P.image?P.image.get():null;if(k&&!j){if(P.image){var f=P.node.contents(k);if(1==f.length&&"IMG"==f[0].tagName){var d=P.selection.ranges(0);return 0===d.startOffset&&0===d.endOffset?b(k).before(b.FE.MARKERS):b(k).after(b.FE.MARKERS),P.selection.restore(),!1}}c&&c.stopPropagation(),L(k)}}},P.helpers.isIOS()?100:0)}}function L(l){var k=P.popups.get("link.edit");k||(k=J());var j=b(l);P.popups.isVisible("link.edit")||P.popups.refresh("link.edit"),P.popups.setContainer("link.edit",P.$sc);var i=j.offset().left+b(l).outerWidth()/2,h=j.offset().top+j.outerHeight();P.popups.show("link.edit",i,h,j.outerHeight())}function K(){P.popups.hide("link.edit")}function J(){var c="";P.opts.linkEditButtons.length>1&&("A"==P.el.tagName&&P.opts.linkEditButtons.indexOf("linkRemove")>=0&&P.opts.linkEditButtons.splice(P.opts.linkEditButtons.indexOf("linkRemove"),1),c='<div class="fr-buttons">'+P.button.buildList(P.opts.linkEditButtons)+"</div>");var g={buttons:c},f=P.popups.create("link.edit",g);return P.$wp&&P.events.$on(P.$wp,"scroll.link-edit",function(){O()&&P.popups.isVisible("link.edit")&&L(O())}),f}function I(){}function H(){var p=P.popups.get("link.insert"),o=O();if(o){var n,m,l=b(o),k=p.find('input.fr-link-attr[type="text"]'),c=p.find('input.fr-link-attr[type="checkbox"]');for(n=0;n<k.length;n++){m=b(k[n]),m.val(l.attr(m.attr("name")||""))}for(c.prop("checked",!1),n=0;n<c.length;n++){m=b(c[n]),l.attr(m.attr("name"))==m.data("checked")&&m.prop("checked",!0)}p.find('input.fr-link-attr[type="text"][name="text"]').val(l.text())}else{p.find('input.fr-link-attr[type="text"]').val(""),p.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),p.find('input.fr-link-attr[type="text"][name="text"]').val(P.selection.text())}p.find("input.fr-link-attr").trigger("change"),(P.image?P.image.get():null)?p.find('.fr-link-attr[name="text"]').parent().hide():p.find('.fr-link-attr[name="text"]').parent().show()}function G(){var f=P.$tb.find('.fr-command[data-cmd="insertLink"]'),i=P.popups.get("link.insert");if(i||(i=F()),!i.hasClass("fr-active")){if(P.popups.refresh("link.insert"),P.popups.setContainer("link.insert",P.$tb||P.$sc),f.is(":visible")){var h=f.offset().left+f.outerWidth()/2,g=f.offset().top+(P.opts.toolbarBottom?10:f.outerHeight()-10);P.popups.show("link.insert",h,g,f.outerHeight())}else{P.position.forSelection(i),P.popups.show("link.insert")}}}function F(s){if(s){return P.popups.onRefresh("link.insert",H),P.popups.onHide("link.insert",I),!0}var r="";P.opts.linkInsertButtons.length>=1&&(r='<div class="fr-buttons">'+P.button.buildList(P.opts.linkInsertButtons)+"</div>");var q='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',p="",o=0;p='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+P.id+'">',p+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+P.id+'" name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++o+'"></div>',P.opts.linkText&&(p+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+P.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+P.language.translate("Text")+'" tabIndex="'+ ++o+'"></div>');for(var n in P.opts.linkAttributes){if(P.opts.linkAttributes.hasOwnProperty(n)){var j=P.opts.linkAttributes[n];p+='<div class="fr-input-line"><input name="'+n+'" type="text" class="fr-link-attr" placeholder="'+P.language.translate(j)+'" tabIndex="'+ ++o+'"></div>'}}P.opts.linkAlwaysBlank||(p+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+P.id+'" tabIndex="'+ ++o+'"><span>'+q+'</span></span><label for="fr-link-target-'+P.id+'">'+P.language.translate("Open in new tab")+"</label></div>"),p+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++o+'" type="button">'+P.language.translate("Insert")+"</button></div></div>";var i={buttons:r,input_layer:p},c=P.popups.create("link.insert",i);return P.$wp&&P.events.$on(P.$wp,"scroll.link-insert",function(){(P.image?P.image.get():null)&&P.popups.isVisible("link.insert")&&w(),O&&P.popups.isVisible("link.insert")&&y()}),c}function E(){var f=O(),c=P.image?P.image.get():null;if(!1===P.events.trigger("link.beforeRemove",[f])){return !1}c&&f?(c.unwrap(),P.image.edit(c)):f&&(P.selection.save(),b(f).replaceWith(b(f).html()),P.selection.restore(),K())}function D(){P.events.on("keyup",function(c){c.which!=b.FE.KEYCODE.ESC&&M(c)}),P.events.on("window.mouseup",M),P.events.$on(P.$el,"click","a",function(c){P.edit.isDisabled()&&c.preventDefault()}),P.helpers.isMobile()&&P.events.$on(P.$doc,"selectionchange",M),F(!0),"A"==P.el.tagName&&P.$el.addClass("fr-view"),P.events.on("toolbar.esc",function(){if(P.popups.isVisible("link.edit")){return P.events.disableBlur(),P.events.focus(),!1}},!0)}function C(p){var o,n,m=P.opts.linkList[p],l=P.popups.get("link.insert"),k=l.find('input.fr-link-attr[type="text"]'),j=l.find('input.fr-link-attr[type="checkbox"]');for(n=0;n<k.length;n++){o=b(k[n]),m[o.attr("name")]?o.val(m[o.attr("name")]):"text"!=o.attr("name")&&o.val("")}for(n=0;n<j.length;n++){o=b(j[n]),o.prop("checked",o.data("checked")==m[o.attr("name")])}P.accessibility.focusPopup(l)}function B(){var t,s,r=P.popups.get("link.insert"),q=r.find('input.fr-link-attr[type="text"]'),p=r.find('input.fr-link-attr[type="checkbox"]'),o=q.filter('[name="href"]').val(),n=q.filter('[name="text"]').val(),m={};for(s=0;s<q.length;s++){t=b(q[s]),["href","text"].indexOf(t.attr("name"))<0&&(m[t.attr("name")]=t.val())}for(s=0;s<p.length;s++){t=b(p[s]),t.is(":checked")?m[t.attr("name")]=t.data("checked"):m[t.attr("name")]=t.data("unchecked")||null}var l=P.helpers.scrollTop();z(o,n,m),b(P.o_win).scrollTop(l)}function A(){if(!P.selection.isCollapsed()){P.selection.save();for(var r=P.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();r.length;){var q=b(r.pop());q.removeClass("fr-unprocessed");var p=P.node.deepestParent(q.get(0));if(p){var o=q.get(0),n="",m="";do{o=o.parentNode,P.node.isBlock(o)||(n+=P.node.closeTagString(o),m=P.node.openTagString(o)+m)}while(o!=p);var l=P.node.openTagString(q.get(0))+q.html()+P.node.closeTagString(q.get(0));q.replaceWith('<span id="fr-break"></span>');var k=p.outerHTML;k=k.replace(/<span id="fr-break"><\/span>/g,n+l+m),p.outerHTML=k}r=P.$el.find(".fr-marker.fr-unprocessed").toArray()}P.html.cleanEmptyTags(),P.selection.restore()}}function z(v,u,t){if(void 0===t&&(t={}),!1===P.events.trigger("link.beforeInsert",[v,u,t])){return !1}var s=P.image?P.image.get():null;s||"A"==P.el.tagName?"A"==P.el.tagName&&P.$el.focus():(P.selection.restore(),P.popups.hide("link.insert"));var r=v;if(P.opts.linkConvertEmailAddress){b.FE.MAIL_REGEX.test(v)&&!/^mailto:.*/i.test(v)&&(v="mailto:"+v)}var q=/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i;if(""===P.opts.linkAutoPrefix||/^(mailto|tel|sms|notes|data):.*/i.test(v)||/^data:image.*/i.test(v)||/^(https?:|ftps?:|file:|)\/\//i.test(v)||q.test(v)||["/","{","[","#","("].indexOf((v||"")[0])<0&&(v=P.opts.linkAutoPrefix+v),v=P.helpers.sanitizeURL(v),P.opts.linkAlwaysBlank&&(t.target="_blank"),P.opts.linkAlwaysNoFollow&&(t.rel="nofollow"),"_blank"==t.target?t.rel?t.rel+=" noopener noreferrer":t.rel="noopener noreferrer":null==t.target&&(t.rel?t.rel=t.rel.replace(/noopener/,"").replace(/noreferrer/,""):t.rel=null),u=u||"",v===P.opts.linkAutoPrefix){return P.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),P.events.trigger("link.bad",[r]),!1}var p,e=O();if(e){p=b(e),p.attr("href",v),u.length>0&&p.text()!=u&&!s&&p.text(u),s||p.prepend(b.FE.START_MARKER).append(b.FE.END_MARKER),p.attr(t),s||P.selection.restore()}else{s?s.wrap('<a href="'+v+'"></a>'):(P.format.remove("a"),P.selection.isCollapsed()?(u=0===u.length?r:u,P.html.insert('<a href="'+v+'">'+b.FE.START_MARKER+u+b.FE.END_MARKER+"</a>"),P.selection.restore()):u.length>0&&u!=P.selection.text().replace(/\n/g,"")?(P.selection.remove(),P.html.insert('<a href="'+v+'">'+b.FE.START_MARKER+u+b.FE.END_MARKER+"</a>"),P.selection.restore()):(A(),P.format.apply("a",{href:v})));for(var d=N(),c=0;c<d.length;c++){p=b(d[c]),p.attr(t),p.removeAttr("_moz_dirty")}1==d.length&&P.$wp&&!s&&(b(d[0]).prepend(b.FE.START_MARKER).append(b.FE.END_MARKER),P.selection.restore())}if(s){P.popups.get("link.insert").find("input:focus").blur(),P.image.edit(s)}else{M()}}function y(){K();var l=O();if(l){var k=P.popups.get("link.insert");k||(k=F()),P.popups.isVisible("link.insert")||(P.popups.refresh("link.insert"),P.selection.save(),P.helpers.isMobile()&&(P.events.disableBlur(),P.$el.blur(),P.events.enableBlur())),P.popups.setContainer("link.insert",P.$sc);var j=(P.image?P.image.get():null)||b(l),g=j.offset().left+j.outerWidth()/2,c=j.offset().top+j.outerHeight();P.popups.show("link.insert",g,c,j.outerHeight())}}function x(){(P.image?P.image.get():null)?P.image.back():(P.events.disableBlur(),P.selection.restore(),P.events.enableBlur(),O()&&P.$wp?(P.selection.restore(),K(),M()):"A"==P.el.tagName?(P.$el.focus(),M()):(P.popups.hide("link.insert"),P.toolbar.showInline()))}function w(){var f=P.image?P.image.get():null;if(f){var i=P.popups.get("link.insert");i||(i=F()),H(!0),P.popups.setContainer("link.insert",P.$sc);var h=f.offset().left+f.outerWidth()/2,g=f.offset().top+f.outerHeight();P.popups.show("link.insert",h,g,f.outerHeight())}}function a(l,k,j){void 0===j&&(j=P.opts.linkMultipleStyles),void 0===k&&(k=P.opts.linkStyles);var e=O();if(!e){return !1}if(!j){var c=Object.keys(k);c.splice(c.indexOf(l),1),b(e).removeClass(c.join(" "))}b(e).toggleClass(l),M()}return{_init:D,remove:E,showInsertPopup:G,usePredefined:C,insertCallback:B,insert:z,update:y,get:O,allSelected:N,back:x,imageLink:w,applyStyle:a}},b.FE.DefineIcon("insertLink",{NAME:"link"}),b.FE.RegisterShortcut(b.FE.KEYCODE.K,"insertLink",null,"K"),b.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),b.FE.DefineIcon("linkOpen",{NAME:"external-link"}),b.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(c){this.link.get()?c.removeClass("fr-hidden"):c.addClass("fr-hidden")},callback:function(){var c=this.link.get();c&&this.o_win.open(c.href)}}),b.FE.DefineIcon("linkEdit",{NAME:"edit"}),b.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(c){this.link.get()?c.removeClass("fr-hidden"):c.addClass("fr-hidden")}}),b.FE.DefineIcon("linkRemove",{NAME:"unlink"}),b.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(c){this.link.get()?c.removeClass("fr-hidden"):c.addClass("fr-hidden")}}),b.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),b.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(d){var c=this.link.get()&&this.doc.hasFocus();(this.image?this.image.get():null)||c||this.opts.toolbarInline?(d.removeClass("fr-hidden"),d.next(".fr-separator").removeClass("fr-hidden")):(d.addClass("fr-hidden"),d.next(".fr-separator").addClass("fr-hidden"))}}),b.FE.DefineIcon("linkList",{NAME:"search"}),b.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',d=this.opts.linkList,f=0;f<d.length;f++){e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+f+'">'+(d[f].displayText||d[f].text)+"</a></li>"}return e+="</ul>"},callback:function(d,c){this.link.usePredefined(c)}}),b.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(c){this.link.get()?c.text(this.language.translate("Update")):c.text(this.language.translate("Insert"))}}),b.FE.DefineIcon("imageLink",{NAME:"link"}),b.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var d,f=this.link.get();f?(d=e.prev(),d.hasClass("fr-separator")&&d.removeClass("fr-hidden"),e.addClass("fr-hidden")):(d=e.prev(),d.hasClass("fr-separator")&&d.addClass("fr-hidden"),e.removeClass("fr-hidden"))}}),b.FE.DefineIcon("linkStyle",{NAME:"magic"}),b.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',d=this.opts.linkStyles;for(var f in d){d.hasOwnProperty(f)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+f+'">'+this.language.translate(d[f])+"</a></li>")}return e+="</ul>"},callback:function(d,c){this.link.applyStyle(c)},refreshOnShow:function(a,h){var g=this.link.get();if(g){var f=b(g);h.find(".fr-command").each(function(){var d=b(this).data("param1"),e=f.hasClass(d);b(this).toggleClass("fr-active",e).attr("aria-selected",e)})}}})});