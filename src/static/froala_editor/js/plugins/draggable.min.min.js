/*!
 * froala_editor v2.6.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2017 Froala Labs
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof module&&module.exports?module.exports=function(a,d){return void 0===d&&(d="undefined"!=typeof window?require("jquery"):require("jquery")(a)),b(d)}:b(window.jQuery)}(function(b){b.extend(b.FE.DEFAULTS,{dragInline:!0}),b.FE.PLUGINS.draggable=function(z){function y(d){return !(!d.originalEvent||!d.originalEvent.target||d.originalEvent.target.nodeType!=Node.TEXT_NODE)||(d.target&&"A"==d.target.tagName&&1==d.target.childNodes.length&&"IMG"==d.target.childNodes[0].tagName&&(d.target=d.target.childNodes[0]),b(d.target).hasClass("fr-draggable")?(z.undo.canDo()||z.undo.saveStep(),z.opts.dragInline?z.$el.attr("contenteditable",!0):z.$el.attr("contenteditable",!1),z.opts.toolbarInline&&z.toolbar.hide(),b(d.target).addClass("fr-dragging"),z.browser.msie||z.browser.edge||z.selection.clear(),void d.originalEvent.dataTransfer.setData("text","Froala")):(d.preventDefault(),!1))}function x(c){return !(c&&("HTML"==c.tagName||"BODY"==c.tagName||z.node.isElement(c)))}function w(e,g,f){z.opts.iframe&&(e+=z.$iframe.offset().top,g+=z.$iframe.offset().left),a.offset().top!=e&&a.css("top",e),a.offset().left!=g&&a.css("left",g),a.width()!=f&&a.css("width",f)}function v(F){var E=z.doc.elementFromPoint(F.originalEvent.pageX-z.win.pageXOffset,F.originalEvent.pageY-z.win.pageYOffset);if(!x(E)){for(var D=0,C=E;!x(C)&&C==E&&F.originalEvent.pageY-z.win.pageYOffset-D>0;){D++,C=z.doc.elementFromPoint(F.originalEvent.pageX-z.win.pageXOffset,F.originalEvent.pageY-z.win.pageYOffset-D)}(!x(C)||a&&0===z.$el.find(C).length&&C!=a.get(0))&&(C=null);for(var B=0,A=E;!x(A)&&A==E&&F.originalEvent.pageY-z.win.pageYOffset+B<b(z.doc).height();){B++,A=z.doc.elementFromPoint(F.originalEvent.pageX-z.win.pageXOffset,F.originalEvent.pageY-z.win.pageYOffset+B)}(!x(A)||a&&0===z.$el.find(A).length&&A!=a.get(0))&&(A=null),E=null==A&&C?C:A&&null==C?A:A&&C?D<B?C:A:null}if(b(E).hasClass("fr-drag-helper")){return !1}if(E&&!z.node.isBlock(E)&&(E=z.node.blockParent(E)),E&&["TD","TH","TR","THEAD","TBODY"].indexOf(E.tagName)>=0&&(E=b(E).parents("table").get(0)),E&&["LI"].indexOf(E.tagName)>=0&&(E=b(E).parents("UL, OL").get(0)),E&&!b(E).hasClass("fr-drag-helper")){a||(b.FE.$draggable_helper||(b.FE.$draggable_helper=b('<div class="fr-drag-helper"></div>')),a=b.FE.$draggable_helper,z.events.on("shared.destroy",function(){a.html("").removeData().remove(),a=null},!0));var n;n=F.originalEvent.pageY<b(E).offset().top+b(E).outerHeight()/2;var e=b(E),d=0;n||0!==e.next().length?(n||(e=e.next()),"before"==a.data("fr-position")&&e.is(a.data("fr-tag"))||(e.prev().length>0&&(d=parseFloat(e.prev().css("margin-bottom"))||0),d=Math.max(d,parseFloat(e.css("margin-top"))||0),w(e.offset().top-d/2-z.$box.offset().top,e.offset().left-z.win.pageXOffset-z.$box.offset().left,e.width()),a.data("fr-position","before"))):"after"==a.data("fr-position")&&e.is(a.data("fr-tag"))||(d=parseFloat(e.css("margin-bottom"))||0,w(e.offset().top+b(E).height()+d/2-z.$box.offset().top,e.offset().left-z.win.pageXOffset-z.$box.offset().left,e.width()),a.data("fr-position","after")),a.data("fr-tag",e),a.addClass("fr-visible"),a.appendTo(z.$box)}else{a&&z.$box.find(a).length>0&&a.removeClass("fr-visible")}}function u(c){c.originalEvent.dataTransfer.dropEffect="move",z.opts.dragInline?r()||!z.browser.msie&&!z.browser.edge||c.preventDefault():(c.preventDefault(),v(c))}function t(c){c.originalEvent.dataTransfer.dropEffect="move",z.opts.dragInline||c.preventDefault()}function s(d){z.$el.attr("contenteditable",!0);var e=z.$el.find(".fr-dragging");a&&a.hasClass("fr-visible")&&z.$box.find(a).length?q(d):e.length&&(d.preventDefault(),d.stopPropagation()),a&&z.$box.find(a).length&&a.removeClass("fr-visible"),e.removeClass("fr-dragging")}function r(){for(var d=null,e=0;e<b.FE.INSTANCES.length;e++){if(d=b.FE.INSTANCES[e].$el.find(".fr-dragging"),d.length){return d.get(0)}}}function q(n){for(var m,l,k=0;k<b.FE.INSTANCES.length;k++){if(m=b.FE.INSTANCES[k].$el.find(".fr-dragging"),m.length){l=b.FE.INSTANCES[k];break}}if(m.length){if(n.preventDefault(),n.stopPropagation(),a&&a.hasClass("fr-visible")&&z.$box.find(a).length){a.data("fr-tag")[a.data("fr-position")]('<span class="fr-marker"></span>'),a.removeClass("fr-visible")}else{if(!1===z.markers.insertAtPoint(n.originalEvent)){return !1}}m.removeClass("fr-dragging");var j=m;if(m.parent().is("A")&&(j=m.parent()),z.core.isEmpty()){z.events.focus()}else{z.$el.find(".fr-marker").replaceWith(b.FE.MARKERS),z.selection.restore()}if(l==z||z.undo.canDo()||z.undo.saveStep(),z.core.isEmpty()){z.$el.html(j)}else{var i=z.markers.insert();0===j.find(i).length?b(i).replaceWith(j):b(i).replaceWith(m),m.after(b.FE.MARKERS),z.selection.restore()}return z.popups.hideAll(),z.selection.save(),z.$el.find(z.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),z.html.wrap(),z.html.fillEmptyBlocks(),z.selection.restore(),z.undo.saveStep(),z.opts.iframe&&z.size.syncIframe(),l!=z&&(l.popups.hideAll(),l.$el.find(l.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),l.html.wrap(),l.html.fillEmptyBlocks(),l.undo.saveStep(),l.events.trigger("element.dropped"),l.opts.iframe&&l.size.syncIframe()),z.events.trigger("element.dropped",[j]),!1}a&&a.removeClass("fr-visible"),z.undo.canDo()||z.undo.saveStep(),setTimeout(function(){z.undo.saveStep()},0)}function p(e){if(e&&"DIV"==e.tagName&&z.node.hasClass(e,"fr-drag-helper")){e.parentNode.removeChild(e)}else{if(e&&e.nodeType==Node.ELEMENT_NODE){for(var g=e.querySelectorAll("div.fr-drag-helper"),f=0;f<g.length;f++){g[f].parentNode.removeChild(g[f])}}}}function o(){z.opts.enter==b.FE.ENTER_BR&&(z.opts.dragInline=!0),z.events.on("dragstart",y,!0),z.events.on("dragover",u,!0),z.events.on("dragenter",t,!0),z.events.on("document.dragend",s,!0),z.events.on("document.drop",s,!0),z.events.on("drop",q,!0),z.events.on("html.processGet",p)}var a;return{_init:o}}});